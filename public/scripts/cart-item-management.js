const cartItemUpdateFormElements=document.querySelectorAll(".cart-item-management"),cartItemTotalPriceElement=document.querySelector(".cart-item-total"),cartTotalPriceElement=document.querySelector(".cart-total-price"),cartBadge=document.querySelector(".badge"),deleteBtnElement=document.getElementById("delete");async function updateCartItem(t){t.preventDefault();const e=t.target,a=e.dataset.productid,r=e.dataset.csrf,n=e.firstElementChild.value;let o;try{o=await fetch("/cart/items",{method:"PATCH",body:JSON.stringify({productId:a,quantity:n,_csrf:r}),headers:{"Content-Type":"application/json"}})}catch(t){return void alert("Nesto nije u redu")}if(!o.ok)return void alert("Nesto nije u redu");const c=await o.json();0===c.updateCartData.updatedItemPrice?e.parentElement.parentElement.remove():cartItemTotalPriceElement.textContent=c.updateCartData.updatedItemPrice.toFixed(2),cartTotalPriceElement.textContent=c.updateCartData.newTotalPrice.toFixed(2),cartBadge.textContent=c.updateCartData.newTotalQuantity}function deleteItem(){cartForm.parentElement.parentElement.remove()}for(const t of cartItemUpdateFormElements)t.addEventListener("submit",updateCartItem);