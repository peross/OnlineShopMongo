const cartItemUpdateFormElements=document.querySelectorAll(".cart-item-management"),cartTotalPriceElement=document.querySelector(".cart-total-price"),cartBadge=document.querySelector(".badge"),deleteBtnElement=document.getElementById("delete");async function updateCartItem(t){t.preventDefault();const e=t.target,a=e.dataset.productid,r=e.dataset.csrf,n=e.firstElementChild.value;let o;try{o=await fetch("/cart/items",{method:"PATCH",body:JSON.stringify({productId:a,quantity:n,_csrf:r}),headers:{"Content-Type":"application/json"}})}catch(t){return void alert("Nesto nije u redu")}if(!o.ok)return void alert("Nesto nije u redu");const d=await o.json();0===d.updateCartData.updatedItemPrice&&e.parentElement.parentElement.remove(),cartTotalPriceElement.textContent=d.updateCartData.newTotalPrice.toFixed(2),cartBadge.textContent=d.updateCartData.newTotalQuantity}function deleteItem(){responseData.updateCartData.updatedItemPrice=0,cartForm.parentElement.parentElement.remove()}for(const t of cartItemUpdateFormElements)t.addEventListener("submit",updateCartItem);